%========= global TikZ styles =====================================================================
\tikzset{
    every node/.style = {draw = none,
	                     inner sep = 0pt,
	                     outer sep = 0pt},
    %
    grid/.style={draw,step=#1,gray,very thin,dotted},
    grid/.default={1.0cm},
    %
    axis/.style={draw,densely dotted,gray,font=\small,text=gray,->,>=stealth},
    %
    fixture/.style 2 args = {fill,
                             pattern = north east lines,
                             minimum width  = #1*1cm,
                             minimum height = #2*1cm},
    %
    spring/.style = {draw,
                     decorate,decoration = {coil,
                                            aspect         = 0.5,
                                            segment length = #1*1mm,
                                            amplitude      = 2mm,
                                           }
                },
    spring/.default = {1},
    %
    mass/.style = {rectangle,
                   minimum size=#1*1cm,
                   draw=black,
                   fill=lightgray,
                   very thin},
    mass/.default={0.7},
    %
    force/.style={->,
                  >=latex,
                  draw=blue,
                  fill=blue,
                  thick},
    %
    rod/.style={draw=blue,
                thick},
}  % \tikzset


%========= CompoundGravityPendulum ==================================================================
%========= Schematic ==============================================================================
\newcommand{\CompoundGravityPendulum}[3]
    % Schematic Diagram of Compound Gravity Pendulum
    % #1 : angle of rigid body's equilibrium orientation with vertical
	% #2 : horizontal shift of sub figure
	% #3 : vertical   shift of sub figure
    % !!!   No terminating ';' when calling this command   !!!
{
    \begin{scope}[xshift=#2,yshift=#3]
        % define constants
        \def\ANGLE{#1}            % angle of rigid body's equilibrium orientation with vertical
        \def\ARC{2.50*\ANGLE}     % angle of arc indicating circular trajectory of the center of mass

        % define coordinates
        \def\G{10.0}              % gravitational acceleration

        \path coordinate (O)  at ( 0.0, 0.0 );      % origin of Cartesian coordinate system
		\path coordinate (P)  at ( 0.0, 0.0 );      % pivot point of rigid body

        % rigid body
        \begin{scope}[rotate=\ANGLE]
		    \path coordinate (CM)  at ( 0.0, -3.0  );   % center of mass of rigid body
            % shape of rigid body
            \draw [blue, fill=blue!10]
                plot [smooth cycle]
                coordinates {(0,2) (1,1) (0.5,-1.5) (2,-3) (0,-4.5) (-2,-3) (-0.5,-1.5) (-1,1)};
            % center of mass
            \draw[blue, fill=blue] (0,-3) circle(2.0pt);
            % position vector of center of mass
            \draw[->,>=stealth,thick] (O) -- (CM)
                node[above left=4pt] {$\vec{r}_{\text{\tiny CM}}$};
            % center line of rigid body
            \draw[blue, dashed, thin] ( 0.0, 2.0 ) -- ( 0.0, -4.5 );
        \end{scope}

        % pivot point
        \draw[, thin] (P) circle (1.0pt);

		% distance between pivot point and center of mass
		\draw[latex-latex,dashed,gray]
            ( $(O)$ ) -- node[black,fill=white,inner sep = 1pt] {$d$} ( -\ANGLE-90 : 3.0 );

        % coordinate systems
        % Cartesian
        \draw[axis]    ( $(O) + ( -3.50,  0.00 )$ )
                    -- ( $(O) + ( +3.50,  0.00 )$ )
            node[below right] {$x$};
        \draw[axis]    ( $(O) + (  0.00, -5.00 )$ )
                    -- ( $(O) + (  0.00, +2.25 )$ )
            node[above right] {$y$};
        \path node at (O) {$\mathcal{O}$};
        % plane polar
        % radial unit vector
        \draw[axis]    ( $(CM)$ )
                    -- ( $(CM) + ( \ANGLE-90 : 1 )$ )
            node[above right=1pt] {$\hat{r}$};
        % tangential unit vector
        \draw[axis]    ( $(CM)$ )
                    -- ( $(CM) + ( \ANGLE : 1 )$ )
            node[below right=1pt] {$\hat{\uptheta}$};

        % gravitational force
        \draw[force]    ( $(CM)$ )
                     -- ( $(CM) + ( 0.00, -0.20 * \G)$ )
            node[left=1pt] {${{\vec{F}}\!_g}$};

        % part of the circular trajectory of the center of mass
        \draw[dashed] (P) ++ ( -\ARC-90 : 3.0 ) arc ( -\ARC-90 : \ARC-90 : 3.0 );

        % angle between rigid body's equilibrium orientation and vertical y-axis
        \draw[dotted,->,>=stealth] (P) ++( -90 : 1.5 ) arc ( -90 : \ANGLE-90 : 1.5 );
        \path (P) ++ ( {0.5*\ANGLE-90} : 1.5 )
            node[below=-5pt,fill=blue!10,inner sep = 1pt] {$\theta$};

    \end{scope}  % [xshift=#2,yshift=#3]
}  % \newcommand{\CompoundGravityPendulum}


%========= SimpleGravityPendulum ==================================================================
%========= Schematic ==============================================================================
\newcommand{\SimpleGravityPendulum}[5]
    % Schematic Diagram of Simple Gravity Pendulum
    % #1 : length of rod
    % #2 : angle  of rod with vertical
    % #3 : size of circle representing mass
	% #4 : horizontal shift of sub figure
	% #5 : vertical   shift of sub figure
    % !!!   No terminating ';' when calling this command   !!!
{
    \begin{scope}[xshift=#4,yshift=#5]
        % define constants
        \def\LENGTH{2}            % length of fixture
        \def\THICKNESS{0.25}      % thickness of fixture
        \def\ROD{#1}              % length of rod
        \def\ANGLE{#2}            % angle of rod with vertical
        \def\MASS{#3}             % radius of circle representing mass
        \def\ARC{1.50*\ANGLE}     % angle of arc indicating circular trajectory of the mass

        % define coordinates
		\path coordinate (FM)  at (0,0);                             % mid point of fixture
                                                                     % also pivot point of pendulum
		\path coordinate (FL)  at ( $(FM) + (-0.5*\LENGTH, 0)$ );    % left edge of fixture
		\path coordinate (FR)  at ( $(FM) + (+0.5*\LENGTH, 0)$ );    % right edge of fixture

		\path coordinate (MC)  at ( \ANGLE-90 : \ROD );              % center of mass

        \path coordinate (O)   at ( $(FM) + (0, -1.0*\ROD)$ );       % origin of coordinate system

        % coordinate systems
        % Cartesian
        \draw[axis]    ( $(O) +( -3.10,  0.00)$ )
                    -- ( $(O) + ( +3.10, 0.00)$ )
            node[below right] {$x$};
        \draw[axis]    ( $(O) + (  0.00, -0.25)$ )
                    -- ( $(O) + (  0.00, \ROD + 2*\THICKNESS)$ )
            node[above right] {$y$};
        \path node at (O) {$\mathcal{O}$};
        % plane polar
        % radial unit vector
        \draw[axis]    ( $(MC)$ )
                    -- ( $(MC) + ( \ANGLE-90 : 1 )$ )
            node[above right=1pt] {$\hat{r}$};
        % tangential unit vector
        \draw[axis]    ( $(MC)$ )
                    -- ( $(MC) + ( \ANGLE : 1 )$ )
            node[below right=1pt] {$\hat{\uptheta}$};

        % fixture
		\path[draw,very thick] (FL) -- (FR);
		\path (FM)
            node[fixture={\LENGTH}{\THICKNESS}, anchor = south] {};

        % part of the circular trajectory of the mass
        \draw[dashed] (FM) ++ ( -\ARC-90 : \ROD ) arc ( -\ARC-90 : \ARC-90 : \ROD );

		% rod
		\path[rod] (FM) -- (MC);

        % angle between rod and vertical y-axis
        \draw[dotted,->,>=stealth] (FM) ++( -90 : 1.5 ) arc ( -90 : \ANGLE-90 : 1.5 );
        \path (FM) ++ ( {0.5*\ANGLE-90} : 1.5 )
            node[below=-5pt,fill=white,inner sep = 1pt] {$\theta$};

		% indicate rod's length = radius of circular trajectory of the mass
		\draw[latex-latex,dashed,gray] ( $(FM)$ ) -- node[black,fill=white,inner sep = 1pt] {$l$} ( -\ANGLE-90 : \ROD );

        % mass
        \path (MC)
            node[mass=\MASS,circle] (M) {$m$};

    \end{scope}  % [xshift=#4,yshift=#5]
}  % \newcommand{\SimpleGravityPendulum}

%========= Free Body Diagram ======================================================================
\newcommand{\SimpleGravityPendulumFBD}[5]
    % Free Body Diagram of Simple Gravity Pendulum
    % #1 : length of rod
    % #2 : angle  of rod with vertical
    % #3 : size of circle representing mass
	% #4 : horizontal shift of sub figure
	% #5 : vertical   shift of sub figure
    % !!!   No terminating ';' when calling this command   !!!
{
    \begin{scope}[xshift=#4,yshift=#5]
        % define constants
        \def\G{10.0}              % gravitational acceleration

        \def\ROD{#1}              % length of rod
        \def\ANGLE{#2}            % angle of rod with vertical
        \def\MASS{#3}             % radius of circle representing mass
        \def\ARC{0.75*\ANGLE}     % angle of arc indicating circular trajectory of the mass

        % define coordinates
        \path coordinate (P)   at ( 0, 0 );                % pivot point of pendulum
		\path coordinate (MC)  at ( \ANGLE-90 : \ROD );    % center of mass

        % vertical
        \draw[densely dotted,gray]    (P) + (  {\ROD * sin(\ANGLE)}, +0.50 )
                                   --     + (  {\ROD * sin(\ANGLE)}, -\ROD - 0.25 );

        % arc
        \draw[dashed] (P) ++ ( \ANGLE-\ARC-90 : \ROD ) arc ( \ANGLE-\ARC-90 : \ANGLE+\ARC-90 : \ROD );

        % tension force from rod
        \draw[force] (MC) -- ++( \ANGLE+90 : 0.25*\G )
            node[below left=1pt] {${{\vec{F}}\!_r}$};

        % angle between tension force from rod and vertical
        \draw[dotted,->,>=stealth] (MC) ++ ( +90 : 1.5 ) arc ( +90 : \ANGLE+90 : 1.5 );
        \path (MC) ++ ( {0.5*\ANGLE+90} : 1.5 )
            node[below=-5pt,fill=white] {$\theta$};

        % gravitational force
        \draw[force]    ( $(MC)$ )
                     -- ( $(MC) + ( 0.00, -0.20 * \G)$ )
            node[left=1pt] {${{\vec{F}}\!_g}$};
        % ... radial component
        \draw[dotted,lightgray]    ( $(MC) + ( \ANGLE-180 : {0.20 *\G * sin(\ANGLE)} )$ )
                                -- ( $(MC) + ( 0.00, -0.20 * \G)$ );
        \draw[force,dashed]    ( $(MC)$ )
                            -- ( $(MC) + ( \ANGLE-90 : {0.20 * \G * cos(\ANGLE)} )$ )
            node[right=1pt] {${\vec{F}\!_{g,r}}$};
        % ... tangential component
        \draw[dotted,lightgray]    ( $(MC) + ( \ANGLE-90 : {0.20 * \G * cos(\ANGLE)} )$ )
                                -- ( $(MC) + ( 0.00, -0.20 * \G)$ );
        \draw[force,dashed]    ( $(MC)$ )
                            -- ( $(MC) + ( \ANGLE-180 : {0.20 *\G * sin(\ANGLE)} )$ )
            node[below=1pt] {${\vec{F}\!_{g,t}}$};

        % angle between vertical and radial component of gravitational force
        \draw[dotted,->,>=stealth] (MC) ++( -90 : 1.5 ) arc ( -90 : \ANGLE-90 : 1.5 );
        \path (MC)++( {0.5*\ANGLE-90} : 1.5 )
            node[below=-5pt,fill=white] {$\theta$};

        % mass
        \path (MC)
            node[mass=\MASS,circle] (M) {$m$};

    \end{scope}  % [xshift=#4,yshift=#5]
}  % \newcommand{\SimpleGravityPendulumFBD}



%========= VerticalMassSpringSystem ===============================================================
\newcommand{\VerticalMassSpringSystem}[5]
    % Vertical Mass Spring System
    % #1 : length         of spring's coil
    % #2 : stretch factor of spring's coil
    % #3 : size of square representing mass    <== must be a non-negative integer
    %                                              0 means no mass is drawn
    % #4 : label for spring's extension
	% #5 : horizontal shift of sub figure
    % !!!   No terminating ';' when calling this command   !!!
{
    \begin{scope}[xshift=#5]
        % define constants
        \def\LENGTH{2}              % length of fixture
        \def\THICKNESS{0.25}        % thickness of fixture
        \def\ATTACHMENT{0.50}       % length of spring's attachment
        \def\SPRING{#1}             % relaxed length of spring's coil
        \def\STRETCH{#2}            % stretch factor of spring's coil
        \def\MASS{#3}               % radius of circle representing mass

        % define coordinates
		\path coordinate (FM)  at (0,0);                                % mid point of fixture
		\path coordinate (FL)  at ( $(FM) + (-0.5*\LENGTH,0)$ );        % left edge of fixture
		\path coordinate (FR)  at ( $(FM) + (+0.5*\LENGTH,0)$ );        % right edge of fixture

		\path coordinate (T) at (0,-\ATTACHMENT);                       % top of spring's coil
		\path coordinate (B) at (0,-\ATTACHMENT-\SPRING*\STRETCH);      % bottom of spring's coil
        \path coordinate (R) at (0,-\ATTACHMENT-\SPRING-\ATTACHMENT);   % free end of relaxed spring

		\path coordinate (MT) at ( $(B)  - (0,\ATTACHMENT)$ );          % top of mass
		\path coordinate (MC) at ( $(MT) - (0,+0.5*\MASS)$ );           % center of mass

        % fixture
		\path[draw,very thick] (FL) -- (FR);
		\path (FM) node[fixture={\LENGTH}{\THICKNESS}, anchor = south] {};

		% connect spring to fixture
		\path[draw] (FM) -- (T);

		% spring's coil
		\path[spring=\STRETCH] (T) -- (B);

		% connect spring to mass
		\path[draw] (B) -- (MT);

        \ifthenelse{\MASS > 0}
        {
    		% mass
            \path (MC)
                node[mass=\MASS] (M) {$m$};
        }

        % coordinate system
        \draw[axis] ( $(R) + ( -0.9, 0 )$ ) -- ( $(R) + ( +0.9,  0   )$ )
            node[below right] {$x$};
        \draw[axis] ( $(R)              $ ) -- ( $(R) + (  0,   -3.5 )$ )
            node[below right] {$y$};

		% spring's relaxed length
		\draw[dashed] ( $(FM)  + ( -0.1, 0 )$ ) -- ( $(FM) + ( -0.9, 0 )$ );
		\draw[dashed] ( $(R)   + ( -0.1, 0 )$ ) -- ( $(R)  + ( -0.9, 0 )$ );
		\draw[latex-latex,dashed] ( $(FM) + ( -0.5, 0.0 )$ ) -- node[fill=white] {$l_0$} ( $(R) + ( -0.5, 0.0 )$ );
        \ifthenelse{\MASS > 0}
        {
            % spring's extension
            \draw[dashed] ( $(R)   + ( -0.1, 0 )$ ) -- ( $(R)  + ( -0.9, 0 )$ );
            \draw[dashed] ( $(MT)  + ( -0.1, 0 )$ ) -- ( $(MT) + ( -0.9, 0 )$ );
            \draw[latex-latex,dashed] ( $(R) + ( -0.5, 0.0 )$ ) -- node[fill=white] {#4} ( $(MT) + ( -0.5, 0.0 )$ );
        }

    \end{scope}  % [xshift=#5]
}  % \newcommand{\VerticalMassSpringSystem}


%========= HorizontalMassSpringSystem =============================================================
%========= Schematic ==============================================================================
\newcommand{\HorizontalMassSpringSystem}[4]
    % horizontal harmonic oscillator
    % #1 : length         of spring's coil
    % #2 : stretch factor of spring's coil
    % #3 : size of square representing mass
    % #4 : vertical offset of sub figure
    % !!!   No terminating ';' when calling this command   !!!
{
    \begin{scope}[yshift=#4]
        % define constants
        \def\LENGTH{2*#1}    		% length    of fixture's floor
        \def\HEIGHT{#3}    			% height    of fixture's wall
        \def\THICKNESS{0.25}    	% thickness of fixture
        \def\ATTACHMENT{0.5}		% length of spring's attachment
        \def\SPRING{#1}				% length of relaxed spring
        \def\STRETCH{#2}			% stretch factor of spring's coil
        \def\MASS{#3}				% size of square representing mass

        % define coordinates
        \path coordinate (E)  at   (0,0);                    			             % edge of fixture
        \path coordinate (F)  at ( $(E) + ( 0, 0.5*\HEIGHT )$ );                     % fix point of spring
        \path coordinate (L)  at ( $(F) + ( \ATTACHMENT, 0 )$ );                     % left  point of spring's coil
        \path coordinate (R)  at ( $(L) + ( \SPRING*\STRETCH, 0 )$ );                % right point of spring's coil
        \path coordinate (M)  at ( $(R) + ( \ATTACHMENT+0.5*\MASS, 0 )$ );	         % center of mass
        \path coordinate (EQ) at ( $(F) + ( 2*\ATTACHMENT+\SPRING+0.5*\MASS, 0 )$ ); % mass' equilibrium position

        % floor
        \path[draw,very thick] (E) -- ( 0:\LENGTH );
        \path (E) node[fixture={\LENGTH}{\THICKNESS}, anchor=north west] {};

        % left wall
        \path[draw,very thick] (E) -- ( 90:\HEIGHT );
        \path (E) node[fixture={\THICKNESS}{\HEIGHT},    anchor=south east] {};
        \path (E) node[fixture={\THICKNESS}{\THICKNESS}, anchor=north east] {};

        % connection of spring to wall
        \path[draw] (F) -- (L);

        % spring's coil
        \path[spring=\STRETCH] (L) -- (R);

        % connection of spring to mass
        \path[draw] (R) -- ( $(M) - ( .5*\MASS, 0 )$ );

        % mass
        \path (M)
            node[mass=\MASS,yshift=0.4pt] (M) {$m$};

        % coordinate system
        \draw[axis] ( $(EQ) + ( -2,  0.00 )$ ) -- ( $(EQ) + ( 2.00, 0.00 )$ )
            node[below right] {$x$};
        \draw[axis] ( $(EQ) + (  0, -0.25 )$ ) -- ( $(EQ) + ( 0.00, 1.00 )$ )
            node[above left]  {$y$};

    \end{scope}  % [yshift=#4]
}  % \newcommand{\HorizontalMassSpringSystem}
